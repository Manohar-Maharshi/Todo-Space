import{J as t,S as e,i as s,s as l,e as a,k as c,c as o,a as n,n as i,d,b as r,f as h,H as u,t as p,g as v,K as m,L as f,h as g,I as k,M as T,N as E,O as C,P as b,j as w,m as z,o as y,x as I,u as N,v as x}from"../chunks/vendor-b757be19.js";t.initializeApp({apiKey:"AIzaSyBfPcMzaY75upoOPAnsaGuKi-YlU0z2WZU",authDomain:"svelte-todo-c24cc.firebaseapp.com",projectId:"svelte-todo-c24cc",storageBucket:"svelte-todo-c24cc.appspot.com",messagingSenderId:"142732551713",appId:"1:142732551713:web:3fda2ebccaaf4c913e2560"});const P=t.firestore();function A(t,e,s){const l=t.slice();return l[4]=e[s],l[17]=e,l[18]=s,l}function D(t){let e,s,l;return{c(){e=a("p"),s=p("Completed Tasks: "),l=p(t[2]),this.h()},l(a){e=o(a,"P",{class:!0});var c=n(e);s=v(c,"Completed Tasks: "),l=v(c,t[2]),c.forEach(d),this.h()},h(){r(e,"class","indi-done svelte-1vlct2")},m(t,a){h(t,e,a),u(e,s),u(e,l)},p(t,e){4&e&&g(l,t[2])},d(t){t&&d(e)}}}function U(t){let e,s,l,m,k,T,E,C;return{c(){e=a("p"),s=p("Completed Tasks: "),l=p(t[2]),m=c(),k=a("span"),T=p("❌"),this.h()},l(a){e=o(a,"P",{class:!0});var c=n(e);s=v(c,"Completed Tasks: "),l=v(c,t[2]),m=i(c),k=o(c,"SPAN",{title:!0,class:!0});var r=n(k);T=v(r,"❌"),r.forEach(d),c.forEach(d),this.h()},h(){r(k,"title","Delete all completed tasks"),r(k,"class","del-btn svelte-1vlct2"),r(e,"class","indi-done svelte-1vlct2")},m(a,c){h(a,e,c),u(e,s),u(e,l),u(e,m),u(e,k),u(k,T),E||(C=f(k,"click",t[10]),E=!0)},p(t,e){4&e&&g(l,t[2])},d(t){t&&d(e),E=!1,C()}}}function $(t){let e;return{c(){e=p("No Tasks...")},l(t){e=v(t,"No Tasks...")},m(t,s){h(t,e,s)},d(t){t&&d(e)}}}function B(t){let e,s,l,m,k,T,C,w,z,y,I=t[4].data().task+"";function N(){return t[14](t[4])}function x(){return t[15](t[4],t[17],t[18])}function P(){return t[16](t[4])}return{c(){e=a("button"),s=p("✔"),l=c(),m=a("span"),k=p(I),T=c(),C=a("button"),w=p("🗑️"),this.h()},l(t){e=o(t,"BUTTON",{title:!0,class:!0});var a=n(e);s=v(a,"✔"),a.forEach(d),l=i(t),m=o(t,"SPAN",{title:!0,class:!0});var c=n(m);k=v(c,I),c.forEach(d),T=i(t),C=o(t,"BUTTON",{title:!0,class:!0});var r=n(C);w=v(r,"🗑️"),r.forEach(d),this.h()},h(){r(e,"title","Mark it Completed"),r(e,"class","util-btn svelte-1vlct2"),r(m,"title","Double click to edit task"),r(m,"class","todo-text svelte-1vlct2"),b(m,"completed",t[4].data().isCompleted),r(C,"title","Delete Task"),r(C,"class","util-btn svelte-1vlct2")},m(t,a){h(t,e,a),u(e,s),h(t,l,a),h(t,m,a),u(m,k),h(t,T,a),h(t,C,a),u(C,w),z||(y=[f(e,"click",N),f(m,"dblclick",x),f(C,"click",P)],z=!0)},p(e,s){t=e,1&s&&I!==(I=t[4].data().task+"")&&g(k,I),1&s&&b(m,"completed",t[4].data().isCompleted)},d(t){t&&d(e),t&&d(l),t&&d(m),t&&d(T),t&&d(C),z=!1,E(y)}}}function M(t){let e,s,l,m,g,k,T,E,C=t[17],b=t[18];const w=()=>t[12](s,C,b),z=()=>t[12](null,C,b);function y(){return t[13](t[4])}return{c(){e=a("div"),s=a("input"),m=c(),g=a("button"),k=p("📝"),this.h()},l(t){e=o(t,"DIV",{class:!0});var l=n(e);s=o(l,"INPUT",{type:!0,maxlength:!0,class:!0}),m=i(l),g=o(l,"BUTTON",{type:!0,class:!0});var a=n(g);k=v(a,"📝"),a.forEach(d),l.forEach(d),this.h()},h(){s.value=l=t[4].data().task,r(s,"type","text"),r(s,"maxlength","25"),r(s,"class","svelte-1vlct2"),r(g,"type","button"),r(g,"class","svelte-1vlct2"),r(e,"class","update-task svelte-1vlct2")},m(t,l){h(t,e,l),u(e,s),w(),u(e,m),u(e,g),u(g,k),T||(E=f(g,"click",y),T=!0)},p(e,a){t=e,1&a&&l!==(l=t[4].data().task)&&s.value!==l&&(s.value=l),C===t[17]&&b===t[18]||(z(),C=t[17],b=t[18],w())},d(t){t&&d(e),z(),T=!1,E()}}}function O(t){let e,s;function l(t,e){return t[4].editMode?M:B}let p=l(t),v=p(t);return{c(){e=a("li"),v.c(),s=c(),this.h()},l(t){e=o(t,"LI",{class:!0});var l=n(e);v.l(l),s=i(l),l.forEach(d),this.h()},h(){r(e,"class","svelte-1vlct2")},m(t,l){h(t,e,l),v.m(e,null),u(e,s)},p(t,a){p===(p=l(t))&&v?v.p(t,a):(v.d(1),v=p(t),v&&(v.c(),v.m(e,s)))},d(t){t&&d(e),v.d()}}}function S(t){let e,s,l,C,b,w,z,y,I,N,x,P,B,M,S,V,j,K,L,R,Y;function G(t,e){return t[2]>0?U:D}let H=G(t),J=H(t),W=t[0],Z=[];for(let a=0;a<W.length;a+=1)Z[a]=O(A(t,W,a));let q=null;return W.length||(q=$()),{c(){e=a("main"),s=a("div"),l=a("div"),C=a("input"),b=c(),w=a("button"),z=p("➕"),y=c(),I=a("div"),N=a("p"),x=p("Total Tasks: "),P=p(t[1]),B=c(),J.c(),M=c(),S=a("p"),V=p("Remaining Tasks: "),j=p(t[3]),K=c(),L=a("ul");for(let t=0;t<Z.length;t+=1)Z[t].c();q&&q.c(),this.h()},l(a){e=o(a,"MAIN",{class:!0});var c=n(e);s=o(c,"DIV",{class:!0});var r=n(s);l=o(r,"DIV",{class:!0});var h=n(l);C=o(h,"INPUT",{type:!0,maxlength:!0,placeholder:!0,class:!0}),b=i(h),w=o(h,"BUTTON",{type:!0,class:!0});var u=n(w);z=v(u,"➕"),u.forEach(d),h.forEach(d),y=i(r),I=o(r,"DIV",{class:!0});var p=n(I);N=o(p,"P",{class:!0});var m=n(N);x=v(m,"Total Tasks: "),P=v(m,t[1]),m.forEach(d),B=i(p),J.l(p),M=i(p),S=o(p,"P",{class:!0});var f=n(S);V=v(f,"Remaining Tasks: "),j=v(f,t[3]),f.forEach(d),p.forEach(d),r.forEach(d),K=i(c),L=o(c,"UL",{class:!0});var g=n(L);for(let t=0;t<Z.length;t+=1)Z[t].l(g);q&&q.l(g),g.forEach(d),c.forEach(d),this.h()},h(){r(C,"type","text"),r(C,"maxlength","25"),r(C,"placeholder","Add Tasks..."),r(C,"class","svelte-1vlct2"),r(w,"type","button"),r(w,"class","svelte-1vlct2"),r(l,"class","input-field"),r(N,"class","indi-total svelte-1vlct2"),r(S,"class","indi-total svelte-1vlct2"),r(I,"class","indicators svelte-1vlct2"),r(s,"class","form svelte-1vlct2"),r(L,"class","svelte-1vlct2"),r(e,"class","svelte-1vlct2")},m(a,c){h(a,e,c),u(e,s),u(s,l),u(l,C),m(C,t[4]),u(l,b),u(l,w),u(w,z),u(s,y),u(s,I),u(I,N),u(N,x),u(N,P),u(I,B),J.m(I,null),u(I,M),u(I,S),u(S,V),u(S,j),u(e,K),u(e,L);for(let t=0;t<Z.length;t+=1)Z[t].m(L,null);q&&q.m(L,null),R||(Y=[f(window,"keydown",t[6]),f(C,"input",t[11]),f(w,"click",t[5])],R=!0)},p(t,[e]){if(16&e&&C.value!==t[4]&&m(C,t[4]),2&e&&g(P,t[1]),H===(H=G(t))&&J?J.p(t,e):(J.d(1),J=H(t),J&&(J.c(),J.m(I,M))),8&e&&g(j,t[3]),897&e){let s;for(W=t[0],s=0;s<W.length;s+=1){const l=A(t,W,s);Z[s]?Z[s].p(l,e):(Z[s]=O(l),Z[s].c(),Z[s].m(L,null))}for(;s<Z.length;s+=1)Z[s].d(1);Z.length=W.length,W.length?q&&(q.d(1),q=null):q||(q=$(),q.c(),q.m(L,null))}},i:k,o:k,d(t){t&&d(e),J.d(),T(Z,t),q&&q.d(),R=!1,E(Y)}}}function V(t,e,s){let l=[],a="",c=0,o=0,n=0;P.collection("todos").orderBy("createdAt","desc").onSnapshot((t=>{s(0,l=t.docs)}));const i=()=>{a&&(P.collection("todos").add({task:a,createdAt:(new Date).getTime(),isCompleted:!1}),P.collection("todos").get().then((t=>{s(1,c=t.size)})),P.collection("todos").where("isCompleted","==",!1).get().then((t=>{s(3,n=t.size)}))),s(4,a="")},d=t=>{P.collection("todos").doc(t).delete(),P.collection("todos").get().then((t=>{s(1,c=t.size)}))},r=(t,e)=>{P.collection("todos").doc(t).update({isCompleted:!e}),P.collection("todos").where("isCompleted","==",!0).get().then((t=>{s(2,o=t.size)})),P.collection("todos").where("isCompleted","==",!1).get().then((t=>{s(3,n=t.size)}))},h=(t,e)=>{e&&P.collection("todos").doc(t).update({task:e,recentUpdateTimestamp:(new Date).getTime()})};return P.collection("todos").get().then((t=>{s(1,c=t.size)})),P.collection("todos").where("isCompleted","==",!0).get().then((t=>{s(2,o=t.size)})),P.collection("todos").where("isCompleted","==",!1).get().then((t=>{s(3,n=t.size)})),[l,c,o,n,a,i,t=>{"Enter"===t.key&&i()},d,r,h,async()=>{(await P.collection("todos").where("isCompleted","==",!0).get()).forEach((t=>{t.ref.delete()})),P.collection("todos").get().then((t=>{s(1,c=t.size)})),P.collection("todos").where("isCompleted","==",!0).get().then((t=>{s(2,o=t.size)})),P.collection("todos").where("isCompleted","==",!1).get().then((t=>{s(3,n=t.size)}))},function(){a=this.value,s(4,a)},function(t,e,a){C[t?"unshift":"push"]((()=>{e[a].inputEl=t,s(0,l)}))},t=>h(t.id,t.inputEl.value),t=>r(t.id,t.data().isCompleted),(t,e,a)=>{s(0,e[a].editMode=!0,l),s(0,l)},t=>d(t.id)]}class j extends e{constructor(t){super(),s(this,t,V,S,l,{})}}function K(t){let e,s,l;return s=new j({}),{c(){e=a("main"),w(s.$$.fragment)},l(t){e=o(t,"MAIN",{});var l=n(e);z(s.$$.fragment,l),l.forEach(d)},m(t,a){h(t,e,a),y(s,e,null),l=!0},p:k,i(t){l||(I(s.$$.fragment,t),l=!0)},o(t){N(s.$$.fragment,t),l=!1},d(t){t&&d(e),x(s)}}}class L extends e{constructor(t){super(),s(this,t,null,K,l,{})}}export{L as default};
